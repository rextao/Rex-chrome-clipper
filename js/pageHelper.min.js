var PageHelper=function(){var $document=$(document);var state=false;var _border={height:undefined,width:undefined,left:undefined,top:undefined,node:undefined,borderwidth:3};function isRtClipperSave(e){return!!($(e.target).hasClass("rt-clipper-save")||$(e.target).parent().hasClass("rt-clipper-save"))}function createSaveBox(){var $div=$(document.createElement("div"));$div.css(_border);$div.data("_node",_border.node);$div.addClass("rt-clipper-save");$div.append('<span class="rt-close-hook">x</span>');$("body").append($div)}var appendMoveBorder=function(){var html='<div class="rt-clipper-border rt_top_hook"></div>'+'<div class="rt-clipper-border rt_right_hook"></div>'+'<div class="rt-clipper-border rt_bottom_hook"></div>'+'<div class="rt-clipper-border rt_left_hook"></div>';$("body").append(html)};var mouseOverHandler=function(e){var $target=$(e.target);if(isRtClipperSave(e)){return false}var _offset=$target.offset();_border.height=$target.outerHeight();_border.width=$target.outerWidth();_border.left=_offset.left;_border.top=_offset.top;$(".rt_top_hook").css({top:_border.top,left:_border.left,height:_border.borderwidth,width:_border.width});$(".rt_right_hook").css({top:_border.top,left:_border.left+_border.width,height:_border.height,width:_border.borderwidth});$(".rt_bottom_hook").css({top:_border.top+_border.height,left:_border.left,height:_border.borderwidth,width:_border.width});$(".rt_left_hook").css({top:_border.top,left:_border.left,height:_border.height,width:_border.borderwidth});_border.node=e.target};var clickHandler=function(e){e.preventDefault();e.stopPropagation();var $target=$(e.target);if($target.hasClass("rt-close-hook")){var $rtClipperSave=$target.parent();var _node=$rtClipperSave.data("_node");$(_node).removeClass("rt-clipper-save-hook");$rtClipperSave.remove();return false}if(isRtClipperSave(e)){return false}$target.addClass("rt-clipper-save-hook");createSaveBox()};var keyBoardHandler=function(e){if(e.shiftKey&&e.keyCode===67){tools.openMessage("启动页面可编辑");PageHelper.prototype.enableContentEditable()}if(e.shiftKey&&e.keyCode===86){tools.openMessage("禁用页面可编辑","error");PageHelper.prototype.disableContentEditable()}if(e.shiftKey&&e.keyCode===88){var autoClipper=new AutoClipper;autoClipper.init()}};this.init=function(){this.state=true;appendMoveBorder();$document.on("mouseover",mouseOverHandler);$document.on("click",clickHandler)};this.destroy=function(){this.state=false;$document.off("mouseover",mouseOverHandler);$document.off("click",clickHandler)};this.initKeyBoardMap=function(){$document.on("keypress",keyBoardHandler)};this.destroyKeyBoardMap=function(){$document.off("keypress",keyBoardHandler)}};PageHelper.prototype.enableContentEditable=function(){document.body.contentEditable=true};PageHelper.prototype.disableContentEditable=function(){document.body.contentEditable=false};